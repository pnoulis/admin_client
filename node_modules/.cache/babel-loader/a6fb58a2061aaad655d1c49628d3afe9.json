{"ast":null,"code":"import{decode}from\"html-entities\";import{useRef,useEffect,useState}from\"react\";import{FORM_STORE}from\"lib/stores\";import{useStyle,useFocus}from\"lib/hooks\";import style from\"./styles/flexibleField_0.module.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";var useFormContext=FORM_STORE.useFormContext;export function FlexibleField_0(_ref){var name=_ref.name,disabled=_ref.disabled;var _useFormContext=useFormContext(),fields=_useFormContext.fields,edit=_useFormContext.edit,setForm=_useFormContext.setForm,thisRef=useRef();function handleInput(e){setForm(\"setInput\",name,decode(e.target.innerHTML));}useEffect(function(){if(disabled)return;var selection=window.getSelection();if(fields[name])selection.collapse(thisRef.current,1);},[fields[name]]);return/*#__PURE__*/_jsx(\"div\",{className:style.textField,children:/*#__PURE__*/_jsx(\"span\",{ref:thisRef,className:style.editable,contentEditable:disabled?false:edit,onInput:handleInput,dangerouslySetInnerHTML:{__html:fields[name]}})});}","map":{"version":3,"sources":["/home/pavlos/Office/projects/new/admin-client/src/components/Fields/FlexibleFields.jsx"],"names":["decode","useRef","useEffect","useState","FORM_STORE","useStyle","useFocus","style","useFormContext","FlexibleField_0","name","disabled","fields","edit","setForm","thisRef","handleInput","e","target","innerHTML","selection","window","getSelection","collapse","current","textField","editable","__html"],"mappings":"AAAA,OAAQA,MAAR,KAAqB,eAArB,CACA,OAAQC,MAAR,CAAgBC,SAAhB,CAA2BC,QAA3B,KAA0C,OAA1C,CACA,OAAQC,UAAR,KAAyB,YAAzB,CACA,OAAQC,QAAR,CAAkBC,QAAlB,KAAiC,WAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,sCAAlB,C,2CACA,GAAOC,CAAAA,cAAP,CAAyBJ,UAAzB,CAAOI,cAAP,CAGA,MAAO,SAASC,CAAAA,eAAT,MAA2C,IAAjBC,CAAAA,IAAiB,MAAjBA,IAAiB,CAAXC,QAAW,MAAXA,QAAW,CAChD,oBAC0BH,cAAc,EADxC,CACCI,MADD,iBACCA,MADD,CACSC,IADT,iBACSA,IADT,CACeC,OADf,iBACeA,OADf,CAEAC,OAFA,CAEUd,MAAM,EAFhB,CAIA,QAASe,CAAAA,WAAT,CAAqBC,CAArB,CAAwB,CACtBH,OAAO,CAAC,UAAD,CAAaJ,IAAb,CAAmBV,MAAM,CAACiB,CAAC,CAACC,MAAF,CAASC,SAAV,CAAzB,CAAP,CACD,CAEDjB,SAAS,CAAC,UAAM,CACd,GAAIS,QAAJ,CAAc,OACd,GAAMS,CAAAA,SAAS,CAAGC,MAAM,CAACC,YAAP,EAAlB,CACA,GAAIV,MAAM,CAACF,IAAD,CAAV,CAAkBU,SAAS,CAACG,QAAV,CAAmBR,OAAO,CAACS,OAA3B,CAAoC,CAApC,EACnB,CAJQ,CAIN,CAACZ,MAAM,CAACF,IAAD,CAAP,CAJM,CAAT,CAMA,mBACE,YAAK,SAAS,CAAEH,KAAK,CAACkB,SAAtB,uBACE,aACE,GAAG,CAAEV,OADP,CAEE,SAAS,CAAER,KAAK,CAACmB,QAFnB,CAGE,eAAe,CAAEf,QAAQ,CAAG,KAAH,CAAWE,IAHtC,CAIE,OAAO,CAAEG,WAJX,CAKE,uBAAuB,CAAE,CAACW,MAAM,CAAEf,MAAM,CAACF,IAAD,CAAf,CAL3B,EADF,EADF,CAYD","sourcesContent":["import {decode} from \"html-entities\";\nimport {useRef, useEffect, useState} from \"react\";\nimport {FORM_STORE} from \"lib/stores\";\nimport {useStyle, useFocus} from \"lib/hooks\";\nimport style from \"./styles/flexibleField_0.module.scss\";\nconst {useFormContext} = FORM_STORE;\n\n\nexport function FlexibleField_0({name, disabled}) {\n  const\n  {fields, edit, setForm} = useFormContext(),\n  thisRef = useRef();\n\n  function handleInput(e) {\n    setForm(\"setInput\", name, decode(e.target.innerHTML));\n  }\n\n  useEffect(() => {\n    if (disabled) return;\n    const selection = window.getSelection();\n    if (fields[name]) selection.collapse(thisRef.current, 1);\n  }, [fields[name]]);\n\n  return (\n    <div className={style.textField}>\n      <span\n        ref={thisRef}\n        className={style.editable}\n        contentEditable={disabled ? false : edit}\n        onInput={handleInput}\n        dangerouslySetInnerHTML={{__html: fields[name]}}\n      >\n      </span>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}