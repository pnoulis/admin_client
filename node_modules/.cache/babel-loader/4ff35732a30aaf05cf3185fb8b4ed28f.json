{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/pavlos/Office/projects/new/admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/home/pavlos/Office/projects/new/admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/pavlos/Office/projects/new/admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";var _templateObject;import backend from\"lib/backend\";import{useEffect,useState}from\"react\";import{useBackend,renderStatus}from\"lib/hooks\";import{PANEL_STORE}from\"lib/stores\";import{Table}from\"components/Tables\";import styled from\"styled-components\";import{FlexibleField_0 as TextField,ImageField,SelectionField}from\"components/Fields\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var usePanelContext=PANEL_STORE.usePanelContext,tags=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return backend.get({url:\"/tags\"});case 2:res=_context.sent;if(res.ok){_context.next=5;break;}return _context.abrupt(\"return\",alert(\"could not load tags\"));case 5:return _context.abrupt(\"return\",res.payload.map(function(v){return v.tag;}));case 6:case\"end\":return _context.stop();}}},_callee);}))(),products=\"/product\",pus=[\"euro\",\"pound\",\"dollar\"],mus=[\"kg\",\"gr\",\"lt\"],CELL_MAP={img:/*#__PURE__*/_jsx(ImageField,{}),pid:/*#__PURE__*/_jsx(TextField,{name:\"pid\",disabled:true}),title:/*#__PURE__*/_jsx(TextField,{name:\"title\"}),description:/*#__PURE__*/_jsx(TextField,{name:\"description\"}),supplier:/*#__PURE__*/_jsx(TextField,{name:\"supplier\"}),sid:/*#__PURE__*/_jsx(TextField,{name:\"sid\"}),wpu:/*#__PURE__*/_jsx(TextField,{name:\"wpu\"}),ppu:/*#__PURE__*/_jsx(TextField,{name:\"ppu\"}),tp:/*#__PURE__*/_jsx(TextField,{name:\"tp\",disabled:true}),stock:/*#__PURE__*/_jsx(TextField,{name:\"stock\"}),vstock:/*#__PURE__*/_jsx(TextField,{name:\"vstock\",disabled:true}),inStock:/*#__PURE__*/_jsx(TextField,{name:\"inStock\",disabled:true}),tags:/*#__PURE__*/_jsx(SelectionField,{list:tags,multiple:true,name:\"tags\",each:\"tag\"}),mu:/*#__PURE__*/_jsx(SelectionField,{list:mus,multiple:false,name:\"mu\"}),pu:/*#__PURE__*/_jsx(SelectionField,{list:pus,multiple:false,name:\"pu\"})},PRODUCT_SCHEMA={toggled:false,edit:false,new:true,fieldErrors:{},fields:{pid:\"\",title:\"\",mu:\"\",pu:\"\",img:\"\",tags:[],description:\"\",supplier:\"\",sid:\"\",wpu:\"\",ppu:\"\",tp:0,stock:\"\",vstock:0,inStock:false,oldImg:\"\"}},Wrapper=styled.article(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\nflex: 1;\\ndisplay: flex;\\njustify-content: center;\\npadding: 150px 30px 150px 50px;\\nalign-items: items;\\nfont-size: var(--font-root-regular);\\n\"]))),Products=function Products(){var _usePanelContext=usePanelContext(),data=_usePanelContext.data,key=_usePanelContext.key,setPanel=_usePanelContext.setPanel,_useBackend=useBackend(),setReq=_useBackend.setReq,status=_useBackend.status,res=_useBackend.res;useEffect(function(){if(data)return;setReq({method:\"get\",url:\"/products\"});},[]);useEffect(function(){if(!res)return null;if(res.ok){setTimeout(function(){return setPanel(\"setData\",res.payload);});}},[res]);return/*#__PURE__*/_jsxs(Wrapper,{children:[status&&renderStatus(status),data&&/*#__PURE__*/_jsx(Table,{table:{body:data,headers:Object.keys(CELL_MAP),extras:[],target:products,cellMap:CELL_MAP,formSchema:PRODUCT_SCHEMA}},key)]});};export default Products;","map":{"version":3,"sources":["/home/pavlos/Office/projects/new/admin-client/src/components/Products/Products.jsx"],"names":["backend","useEffect","useState","useBackend","renderStatus","PANEL_STORE","Table","styled","FlexibleField_0","TextField","ImageField","SelectionField","usePanelContext","tags","get","url","res","ok","alert","payload","map","v","tag","products","pus","mus","CELL_MAP","img","pid","title","description","supplier","sid","wpu","ppu","tp","stock","vstock","inStock","mu","pu","PRODUCT_SCHEMA","toggled","edit","new","fieldErrors","fields","oldImg","Wrapper","article","Products","data","key","setPanel","setReq","status","method","setTimeout","body","headers","Object","keys","extras","target","cellMap","formSchema"],"mappings":"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","sourcesContent":["import backend from \"lib/backend\";\nimport {useEffect, useState} from \"react\";\nimport {useBackend, renderStatus} from \"lib/hooks\";\nimport {PANEL_STORE} from \"lib/stores\";\nimport {Table} from \"components/Tables\";\nimport styled from \"styled-components\";\nimport {FlexibleField_0 as TextField, ImageField, SelectionField} from \"components/Fields\";\n\nconst\n{usePanelContext} = PANEL_STORE,\ntags = (async () => {\n  const res = await backend.get({url: \"/tags\"});\n  if (!res.ok) return alert(\"could not load tags\");\n\n  return res.payload.map(v => v.tag);\n})(),\nproducts = \"/product\",\npus = [\n  \"euro\",\n  \"pound\",\n  \"dollar\"\n],\nmus = [\n  \"kg\",\n  \"gr\",\n  \"lt\",\n],\nCELL_MAP = {\n  img: (<ImageField/>),\n  pid: (<TextField name=\"pid\" disabled={true}/>),\n  title: (<TextField name=\"title\"/>),\n  description: (<TextField name=\"description\"/>),\n  supplier: (<TextField name=\"supplier\"/>),\n  sid: (<TextField name=\"sid\"/>),\n  wpu: (<TextField name=\"wpu\"/>),\n  ppu: (<TextField name=\"ppu\"/>),\n  tp: (<TextField name=\"tp\" disabled={true}/>),\n  stock: (<TextField name=\"stock\"/>),\n  vstock: (<TextField name=\"vstock\" disabled={true}/>),\n  inStock: (<TextField name=\"inStock\" disabled={true}/>),\n  tags: (<SelectionField list={tags} multiple={true} name=\"tags\" each=\"tag\"/>),\n  mu: (<SelectionField list={mus} multiple={false} name=\"mu\"/>),\n  pu: (<SelectionField list={pus} multiple={false} name=\"pu\"/>),\n},\nPRODUCT_SCHEMA = {\n  toggled: false,\n  edit: false,\n  new: true,\n  fieldErrors: {},\n  fields: {\n    pid: \"\",\n    title: \"\",\n    mu: \"\",\n    pu: \"\",\n    img: \"\",\n    tags: [],\n    description: \"\",\n    supplier: \"\",\n    sid: \"\",\n    wpu: \"\",\n    ppu: \"\",\n    tp: 0,\n    stock: \"\",\n    vstock: 0,\n    inStock: false,\n    oldImg: \"\",\n  }\n},\nWrapper = styled.article`\nflex: 1;\ndisplay: flex;\njustify-content: center;\npadding: 150px 30px 150px 50px;\nalign-items: items;\nfont-size: var(--font-root-regular);\n`,\nProducts = () => {\n  const\n  {data, key, setPanel} = usePanelContext(),\n  {setReq, status, res} = useBackend();\n\n  useEffect(() => {\n    if (data) return;\n    setReq({method: \"get\", url: \"/products\"});\n  },[]);\n\n  useEffect(() => {\n    if (!res) return null;\n    if (res.ok) {\n      setTimeout(() => setPanel(\"setData\", res.payload));\n    }\n  }, [res]);\n\n  return (\n    <Wrapper>\n      {status && renderStatus(status)}\n        {\n          data &&\n            <Table key={key} table={{\n              body: data,\n              headers: Object.keys(CELL_MAP),\n              extras: [],\n              target: products,\n              cellMap: CELL_MAP,\n              formSchema: PRODUCT_SCHEMA,\n            }}\n            />\n        }\n    </Wrapper>\n  );\n};\n\nexport default Products;\n"]},"metadata":{},"sourceType":"module"}