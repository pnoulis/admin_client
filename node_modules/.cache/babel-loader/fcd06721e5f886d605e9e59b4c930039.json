{"ast":null,"code":"import _slicedToArray from\"/home/pavlos/Office/projects/new/admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/home/pavlos/Office/projects/new/admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{useState,useEffect}from\"react\";import{useHover,useStyle}from\"lib/hooks\";import{FORM_STORE}from\"lib/stores\";import style from\"./styles/selector_0.module.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";var useFormContext=FORM_STORE.useFormContext;var styleReducer=function styleReducer(params){var config={};config.hovered=params.edit&&params.hovered;config.selected=params.selected;return config;};function Selector(_ref){var selected=_ref.selected,name=_ref.name,children=_ref.children;var _useHover=useHover(),hovered=_useHover.hovered,bindHover=_useHover.bindHover,_useFormContext=useFormContext(),edit=_useFormContext.edit,setForm=_useFormContext.setForm,setStyle=useStyle(style,{edit:edit,selected:selected,hovered:hovered},styleReducer);return/*#__PURE__*/_jsx(\"span\",_objectSpread(_objectSpread({},bindHover),{},{className:setStyle([\"selected\",\"hovered\"],style.selector),onClick:function onClick(){return edit&&setForm(\"setInput\",name,children);},children:children}));}function isSelected(selected,current){if(selected instanceof Array){if(selected.some(function(selected){return selected===current;}))return true;return false;}if(selected===current)return true;return false;}export function SelectionField(_ref2){var list=_ref2.list,multiple=_ref2.multiple,name=_ref2.name,each=_ref2.each;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),asyncList=_useState2[0],setAsyncList=_useState2[1],_useFormContext2=useFormContext(),fields=_useFormContext2.fields;useEffect(function(){var eventRef;if(\"then\"in list){eventRef=setTimeout(function(){list.then(function(r){return setAsyncList(r);}).catch(function(err){return alert(err);});});}else setAsyncList(list);return function(){return clearTimeout(eventRef);};},[]);return/*#__PURE__*/_jsx(\"article\",{className:style.selectionField,children:asyncList.map(function(v,i){return/*#__PURE__*/_jsx(Selector,{selected:isSelected(fields[name],v),name:name,children:v},i);})});}","map":{"version":3,"sources":["/home/pavlos/Office/projects/new/admin-client/src/components/Fields/SelectionFields.jsx"],"names":["useState","useEffect","useHover","useStyle","FORM_STORE","style","useFormContext","styleReducer","params","config","hovered","edit","selected","Selector","name","children","bindHover","setForm","setStyle","selector","isSelected","current","Array","some","SelectionField","list","multiple","each","asyncList","setAsyncList","fields","eventRef","setTimeout","then","r","catch","err","alert","clearTimeout","selectionField","map","v","i"],"mappings":"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","sourcesContent":["import {useState, useEffect} from \"react\";\nimport {useHover, useStyle} from \"lib/hooks\";\nimport {FORM_STORE} from \"lib/stores\";\nimport style from \"./styles/selector_0.module.scss\";\nconst {useFormContext} = FORM_STORE;\n\nconst styleReducer = (params) => {\n  let config = {};\n  config.hovered = params.edit && params.hovered;\n  config.selected = params.selected;\n  return config;\n};\n\nfunction Selector({selected, name, children}) {\n  const\n  {hovered, bindHover} = useHover(),\n  {edit, setForm} = useFormContext(),\n  setStyle = useStyle(style, {edit, selected, hovered}, styleReducer);\n\n  return (\n    <span {...bindHover}\n          className={setStyle([\"selected\", \"hovered\"], style.selector)}\n          onClick={() => edit && setForm(\"setInput\", name, children)}>\n      {children}\n    </span>\n  );\n}\n\nfunction isSelected(selected, current) {\n  if (selected instanceof Array) {\n    if (selected.some(selected => selected === current)) return true;\n    return false;\n  }\n\n  if (selected === current) return true;\n  return false;\n}\n\nexport function SelectionField({list, multiple, name, each}) {\n  const\n  [asyncList, setAsyncList] = useState([]),\n  {fields} = useFormContext();\n\n  useEffect(() => {\n    let eventRef;\n    if (\"then\" in list) {\n      eventRef = setTimeout(() => {\n        list.then(r => setAsyncList(r)).catch(err => alert(err));\n      });\n    } else setAsyncList(list);\n    return () => clearTimeout(eventRef);\n  }, []);\n\n  return (\n    <article className={style.selectionField}>\n      {asyncList.map((v, i) => (\n        <Selector key={i} selected={isSelected(fields[name], v)} name={name}>\n          {v}\n        </Selector>\n      ))}\n    </article>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}