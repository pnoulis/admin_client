{"ast":null,"code":"import _regeneratorRuntime from\"/home/pavlos/Office/projects/new/admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/pavlos/Office/projects/new/admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/pavlos/Office/projects/new/admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/home/pavlos/Office/projects/new/admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";// third party\nimport{useState,useEffect}from\"react\";import ReactLoading from\"react-loading\";// own - utilities\nimport backend from\"lib/backend\";import{jsx as _jsx}from\"react/jsx-runtime\";export{useBackend,renderStatus};/*\n  This hook requires multiple components and utilities to function\n */function Success(_ref){var userStyle=_ref.userStyle;var style={outer:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},imgContainer:_objectSpread({width:\"50px\",height:\"50px\"},userStyle),img:{display:\"inline-block\",width:\"100%\",height:\"100%\"}};return/*#__PURE__*/_jsx(\"article\",{style:style.outer,children:/*#__PURE__*/_jsx(\"p\",{style:style.imgContainer,children:/*#__PURE__*/_jsx(\"img\",{style:style.img,src:\"/tick.png\",alt:\"fetch-success-icon\"})})});}function Loading(_ref2){var userStyle=_ref2.userStyle;var style={outer:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},imgContainer:_objectSpread(_objectSpread({width:\"50px\",height:\"50px\"},userStyle),{},{color:\"inherit\"})};return/*#__PURE__*/_jsx(\"article\",{style:style.outer,children:/*#__PURE__*/_jsx(\"div\",{style:style.imgContainer,children:/*#__PURE__*/_jsx(ReactLoading,{type:\"spinningBubbles\",color:userStyle.color||\"#1e90ff\",height:\"100%\",width:\"100%\"})})});}var success=function success(userStyle){return/*#__PURE__*/_jsx(Success,{userStyle:userStyle});},loading=function loading(userStyle){return/*#__PURE__*/_jsx(Loading,{userStyle:userStyle||{}});},requestStatus=function requestStatus(req,res,resetRequest){if(!req)return null;else if(res)return success;else return loading;},useBackend=function useBackend(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),req=_useState2[0],setRequest=_useState2[1],_useState3=useState(false),_useState4=_slicedToArray(_useState3,2),res=_useState4[0],setResponse=_useState4[1],_useState5=useState(null),_useState6=_slicedToArray(_useState5,2),payload=_useState6[0],setPayload=_useState6[1];useEffect(function(){if(!req)return;setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=setResponse;_context.next=3;return backend[req.method](_objectSpread({},req));case 3:_context.t1=_context.sent;return _context.abrupt(\"return\",(0,_context.t0)(_context.t1));case 5:case\"end\":return _context.stop();}}},_callee);})),1500);},[req]);useEffect(function(){if(!res)return null;setTimeout(function(){return setRequest(false);},1500);// if (!res.ok && res.err) return setTimeout(() => Router.push(res.payload.redirect), 2000);\nsetTimeout(function(){return setPayload(res);},1700);},[res]);return{setReq:function setReq(req){return setRequest(req);},status:requestStatus(req,res),res:payload};},renderStatus=function renderStatus(status){if(!status)return null;return status.name===\"loading\"?status((arguments.length<=1?undefined:arguments[1])||{}):status((arguments.length<=2?undefined:arguments[2])||{});};","map":{"version":3,"sources":["/home/pavlos/Office/projects/new/admin-client/src/lib/hooks/backend.js"],"names":["useState","useEffect","ReactLoading","backend","useBackend","renderStatus","Success","userStyle","style","outer","display","justifyContent","alignItems","imgContainer","width","height","img","Loading","color","success","loading","requestStatus","req","res","resetRequest","setRequest","setResponse","payload","setPayload","setTimeout","method","setReq","status","name"],"mappings":"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","sourcesContent":["// third party\nimport {useState, useEffect} from \"react\";\nimport ReactLoading from \"react-loading\";\n// own - utilities\nimport backend from \"lib/backend\";\n\nexport {useBackend, renderStatus};\n/*\n  This hook requires multiple components and utilities to function\n */\n\nfunction Success({userStyle}) {\n  const style = {\n    outer: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n    },\n    imgContainer: {\n      width: \"50px\",\n      height: \"50px\",\n      ...userStyle,\n    },\n    img: {\n      display: \"inline-block\",\n      width: \"100%\",\n      height: \"100%\",\n    }\n  };\n  return (\n    <article style={style.outer}>\n      <p style={style.imgContainer}>\n        <img style={style.img} src=\"/tick.png\" alt=\"fetch-success-icon\"/>\n      </p>\n    </article>\n  );\n}\n\nfunction Loading({userStyle}) {\n  const style = {\n    outer: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n    },\n    imgContainer: {\n      width: \"50px\",\n      height: \"50px\",\n      ...userStyle,\n      color: \"inherit\",\n    },\n  };\n\n  return (\n    <article style={style.outer}>\n      <div style={style.imgContainer}>\n        <ReactLoading\n          type=\"spinningBubbles\"\n          color={userStyle.color || \"#1e90ff\"}\n          height=\"100%\"\n          width=\"100%\"\n        />\n      </div>\n    </article>\n  );\n}\n\nconst\nsuccess = (userStyle) => <Success userStyle={userStyle}/>,\nloading = (userStyle) => <Loading userStyle={userStyle || {}}/>,\nrequestStatus = (req, res, resetRequest) => {\n  if (!req) return null;\n  else if (res) return success;\n  else return loading;\n},\nuseBackend = () => {\n  const\n  [req, setRequest] = useState(false),\n  [res, setResponse] = useState(false),\n  [payload, setPayload] = useState(null);\n\n  useEffect(() => {\n    if (!req) return;\n    setTimeout(async () => setResponse(await backend[req.method]({...req})), 1500);\n  }, [req]);\n\n  useEffect(() => {\n    if (!res) return null;\n    setTimeout(() => setRequest(false), 1500);\n    // if (!res.ok && res.err) return setTimeout(() => Router.push(res.payload.redirect), 2000);\n    setTimeout(() => setPayload(res), 1700);\n  }, [res]);\n\n  return {\n    setReq: (req) => setRequest(req),\n    status: requestStatus(req, res),\n    res: payload,\n  };\n},\nrenderStatus = (status, ...args) => {\n  if (!status) return null;\n  return (status.name === \"loading\") ?\n    status(args[0] || {}) :\n    status(args[1] || {});\n};\n"]},"metadata":{},"sourceType":"module"}