{"ast":null,"code":"var _jsxFileName = \"/home/pavlos/Office/projects/new/admin-client/src/components/Products/Products.jsx\",\n    _s = $RefreshSig$();\n\nimport backend from \"lib/backend\";\nimport { useEffect, useState } from \"react\";\nimport { useBackend, renderStatus } from \"lib/hooks\";\nimport { PANEL_STORE } from \"lib/stores\";\nimport { Table } from \"components/Tables\";\nimport styled from \"styled-components\";\nimport { FlexibleField_0 as TextField, ImageField, SelectionField } from \"components/Fields\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst {\n  usePanelContext\n} = PANEL_STORE,\n      tags = backend.get({\n  url: \"/tags\"\n}),\n      products = \"/product\",\n      pus = [\"euro\", \"pound\", \"dollar\"],\n      mus = [\"kg\", \"gr\", \"lt\"],\n      CELL_MAP = {\n  img: /*#__PURE__*/_jsxDEV(ImageField, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 9\n  }, this),\n  pid: /*#__PURE__*/_jsxDEV(TextField, {\n    name: \"pid\",\n    disabled: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 9\n  }, this),\n  title: /*#__PURE__*/_jsxDEV(TextField, {\n    name: \"title\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 11\n  }, this),\n  description: /*#__PURE__*/_jsxDEV(TextField, {\n    name: \"description\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 17\n  }, this),\n  supplier: /*#__PURE__*/_jsxDEV(TextField, {\n    name: \"supplier\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 14\n  }, this),\n  sid: /*#__PURE__*/_jsxDEV(TextField, {\n    name: \"sid\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 9\n  }, this),\n  wpu: /*#__PURE__*/_jsxDEV(TextField, {\n    name: \"wpu\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 9\n  }, this),\n  ppu: /*#__PURE__*/_jsxDEV(TextField, {\n    name: \"ppu\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this),\n  tp: /*#__PURE__*/_jsxDEV(TextField, {\n    name: \"tp\",\n    disabled: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 8\n  }, this),\n  stock: /*#__PURE__*/_jsxDEV(TextField, {\n    name: \"stock\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 11\n  }, this),\n  vstock: /*#__PURE__*/_jsxDEV(TextField, {\n    name: \"vstock\",\n    disabled: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 12\n  }, this),\n  inStock: /*#__PURE__*/_jsxDEV(TextField, {\n    name: \"inStock\",\n    disabled: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 13\n  }, this),\n  tags: /*#__PURE__*/_jsxDEV(SelectionField, {\n    list: tags,\n    multiple: true,\n    name: \"tags\",\n    each: \"tag\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 10\n  }, this),\n  mu: /*#__PURE__*/_jsxDEV(SelectionField, {\n    list: mus,\n    multiple: false,\n    name: \"mu\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 8\n  }, this),\n  pu: /*#__PURE__*/_jsxDEV(SelectionField, {\n    list: pus,\n    multiple: false,\n    name: \"pu\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 8\n  }, this)\n},\n      PRODUCT_SCHEMA = {\n  toggled: false,\n  edit: false,\n  new: true,\n  fieldErrors: {},\n  fields: {\n    pid: \"\",\n    title: \"\",\n    mu: \"\",\n    pu: \"\",\n    img: {},\n    tags: [],\n    description: \"\",\n    supplier: \"\",\n    sid: \"\",\n    wpu: \"\",\n    ppu: \"\",\n    tp: 0,\n    stock: \"\",\n    vstock: 0,\n    inStock: false,\n    oldImg: \"\"\n  }\n},\n      Wrapper = styled.article`\nflex: 1;\ndisplay: flex;\njustify-content: center;\npadding: 150px 30px 150px 50px;\nalign-items: items;\nfont-size: var(--font-root-regular);\n`,\n      Products = () => {\n  _s();\n\n  const {\n    data,\n    setPanel\n  } = usePanelContext(),\n        {\n    setReq,\n    status,\n    res\n  } = useBackend();\n  useEffect(() => {\n    if (data) return;\n    setReq({\n      method: \"get\",\n      url: \"/products\"\n    });\n  }, []);\n  useEffect(() => {\n    if (!res) return null;\n\n    if (res.ok) {\n      setTimeout(() => setPanel(\"setData\", res.payload));\n    }\n  }, [res]);\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: [status && renderStatus(status), data && /*#__PURE__*/_jsxDEV(Table, {\n      table: {\n        body: data,\n        headers: Object.keys(CELL_MAP),\n        extras: [],\n        target: products,\n        cellMap: CELL_MAP,\n        formSchema: PRODUCT_SCHEMA\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Products, \"sQlFKrN3BU5/qR/HGNu9KAsecXI=\", false, function () {\n  return [usePanelContext, useBackend];\n});\n\nexport default Products;","map":{"version":3,"sources":["/home/pavlos/Office/projects/new/admin-client/src/components/Products/Products.jsx"],"names":["backend","useEffect","useState","useBackend","renderStatus","PANEL_STORE","Table","styled","FlexibleField_0","TextField","ImageField","SelectionField","usePanelContext","tags","get","url","products","pus","mus","CELL_MAP","img","pid","title","description","supplier","sid","wpu","ppu","tp","stock","vstock","inStock","mu","pu","PRODUCT_SCHEMA","toggled","edit","new","fieldErrors","fields","oldImg","Wrapper","article","Products","data","setPanel","setReq","status","res","method","ok","setTimeout","payload","body","headers","Object","keys","extras","target","cellMap","formSchema"],"mappings":"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","sourcesContent":["import backend from \"lib/backend\";\nimport {useEffect, useState} from \"react\";\nimport {useBackend, renderStatus} from \"lib/hooks\";\nimport {PANEL_STORE} from \"lib/stores\";\nimport {Table} from \"components/Tables\";\nimport styled from \"styled-components\";\nimport {FlexibleField_0 as TextField, ImageField, SelectionField} from \"components/Fields\";\n\nconst\n{usePanelContext} = PANEL_STORE,\ntags = backend.get({url: \"/tags\"}),\nproducts = \"/product\",\npus = [\n  \"euro\",\n  \"pound\",\n  \"dollar\"\n],\nmus = [\n  \"kg\",\n  \"gr\",\n  \"lt\",\n],\nCELL_MAP = {\n  img: (<ImageField/>),\n  pid: (<TextField name=\"pid\" disabled={true}/>),\n  title: (<TextField name=\"title\"/>),\n  description: (<TextField name=\"description\"/>),\n  supplier: (<TextField name=\"supplier\"/>),\n  sid: (<TextField name=\"sid\"/>),\n  wpu: (<TextField name=\"wpu\"/>),\n  ppu: (<TextField name=\"ppu\"/>),\n  tp: (<TextField name=\"tp\" disabled={true}/>),\n  stock: (<TextField name=\"stock\"/>),\n  vstock: (<TextField name=\"vstock\" disabled={true}/>),\n  inStock: (<TextField name=\"inStock\" disabled={true}/>),\n  tags: (<SelectionField list={tags} multiple={true} name=\"tags\" each=\"tag\"/>),\n  mu: (<SelectionField list={mus} multiple={false} name=\"mu\"/>),\n  pu: (<SelectionField list={pus} multiple={false} name=\"pu\"/>),\n},\nPRODUCT_SCHEMA = {\n  toggled: false,\n  edit: false,\n  new: true,\n  fieldErrors: {},\n  fields: {\n    pid: \"\",\n    title: \"\",\n    mu: \"\",\n    pu: \"\",\n    img: {},\n    tags: [],\n    description: \"\",\n    supplier: \"\",\n    sid: \"\",\n    wpu: \"\",\n    ppu: \"\",\n    tp: 0,\n    stock: \"\",\n    vstock: 0,\n    inStock: false,\n    oldImg: \"\",\n  }\n},\nWrapper = styled.article`\nflex: 1;\ndisplay: flex;\njustify-content: center;\npadding: 150px 30px 150px 50px;\nalign-items: items;\nfont-size: var(--font-root-regular);\n`,\nProducts = () => {\n  const\n  {data, setPanel} = usePanelContext(),\n  {setReq, status, res} = useBackend();\n\n  useEffect(() => {\n    if (data) return;\n    setReq({method: \"get\", url: \"/products\"});\n  },[]);\n\n  useEffect(() => {\n    if (!res) return null;\n    if (res.ok) {\n      setTimeout(() => setPanel(\"setData\", res.payload));\n    }\n  }, [res]);\n\n  return (\n    <Wrapper>\n      {status && renderStatus(status)}\n        {\n          data &&\n            <Table table={{\n              body: data,\n              headers: Object.keys(CELL_MAP),\n              extras: [],\n              target: products,\n              cellMap: CELL_MAP,\n              formSchema: PRODUCT_SCHEMA,\n            }}\n            />\n        }\n    </Wrapper>\n  );\n};\n\nexport default Products;\n"]},"metadata":{},"sourceType":"module"}